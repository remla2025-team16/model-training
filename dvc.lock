schema: '2.0'
stages:
  preprocess:
    cmd: python sentiment_model_trainer/preprocess.py --input data/raw/a1_RestaurantReviews_HistoricDump.tsv
      --output data/processed/preprocessed_data.pkl
    deps:
    - path: data/raw/a1_RestaurantReviews_HistoricDump.tsv
      hash: md5
      md5: 102f1f4193e0bdebdd6cce7f13e0a839
      size: 54686
      isexec: true
    - path: sentiment_model_trainer/preprocess.py
      hash: md5
      md5: 80415f6f52b98e175f386a2e6c8f9280
      size: 2313
      isexec: true
    outs:
    - path: artifacts/c1_BoW_Sentiment_Model.pkl
      hash: md5
      md5: 50ae05d052d210a66e06cbb59aaf226c
      size: 39432
      isexec: true
    - path: data/processed/preprocessed_data.pkl
      hash: md5
      md5: 64c81e0f77eacdce6f96dfedb702bb6b
      size: 10231518
      isexec: true
  train:
    cmd: python sentiment_model_trainer/train.py --input data/processed/preprocessed_data.pkl
      --vectorizer artifacts/c1_BoW_Sentiment_Model.pkl --model models/sentiment-model.pkl
      --metrics artifacts/accuracy.json
    deps:
    - path: artifacts/c1_BoW_Sentiment_Model.pkl
      hash: md5
      md5: 50ae05d052d210a66e06cbb59aaf226c
      size: 39432
      isexec: true
    - path: data/processed/preprocessed_data.pkl
      hash: md5
      md5: 64c81e0f77eacdce6f96dfedb702bb6b
      size: 10231518
      isexec: true
    - path: sentiment_model_trainer/train.py
      hash: md5
      md5: 893a9ea25d1b602331b2588156705e32
      size: 2627
      isexec: true
    outs:
    - path: artifacts/accuracy.json
      hash: md5
      md5: 53730ccd81d39d5b023b80aee3d0cf4d
      size: 36
      isexec: true
    - path: models/sentiment-model.pkl
      hash: md5
      md5: e2369f153a4b821d525fba40d42392c4
      size: 51840
      isexec: true
  evaluate:
    cmd: python sentiment_model_trainer/evaluate.py --model models/sentiment-model-without-vectorizer.pkl
      --data data/processed/preprocessed_data.pkl --output artifacts/evaluation.json
    deps:
    - path: data/processed/preprocessed_data.pkl
      hash: md5
      md5: 64c81e0f77eacdce6f96dfedb702bb6b
      size: 10231518
      isexec: true
    - path: models/sentiment-model-without-vectorizer.pkl
      hash: md5
      md5: 2d45586a252ede1086c77d609c28950c
      size: 12328
      isexec: true
    - path: sentiment_model_trainer/evaluate.py
      hash: md5
      md5: 28e4364263bce60c5cfebae16144f315
      size: 1867
      isexec: true
    outs:
    - path: artifacts/evaluation.json
      hash: md5
      md5: bb86df87b33ce5b07844e0dd26c4e142
      size: 109
      isexec: true
  test:
    cmd: ./run_all_test.bash
    deps:
    - path: requirements.txt
      hash: md5
      md5: ede084e3610059a88efea987e71a40cf
      size: 182
      isexec: true
    - path: sentiment_model_trainer/
      hash: md5
      md5: fd2ecb2ddc57b83d5c4bb3e06cdb48cf.dir
      size: 19698
      nfiles: 10
    - path: tests/
      hash: md5
      md5: 63cbd9425e8a221e11ddf5853a1f5942.dir
      size: 90577
      nfiles: 26
    outs:
    - path: metrics/test_metrics.json
      hash: md5
      md5: 893690888d57e13e219fe5c8e1cfd161
      size: 140
      isexec: true
